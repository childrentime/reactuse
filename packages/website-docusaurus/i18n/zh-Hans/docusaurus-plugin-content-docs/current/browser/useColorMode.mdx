---
title: useColorMode ç”¨æ³•ä¸ç¤ºä¾‹
sidebar_label: useColorMode
description: >-
  import Details from "@theme/Details"; å“åº”å¼é¢œè‰²æ¨¡å¼ï¼ˆä¸»é¢˜ï¼‰ç®¡ç†ï¼Œå…·æœ‰è‡ªåŠ¨æ•°æ®æŒä¹…åŒ–å’Œçµæ´»é…ç½®åŠŸèƒ½ã€‚ <Details summary="ç‚¹å‡»å±•å¼€"> å¯¹äºæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œç”±äºæ— æ³•åœ¨æœåŠ¡ç«¯è·å–åˆ°ç”¨æˆ·çš„é¢œè‰²åå¥½ã€‚æ‰€ä»¥ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°é—ªçƒã€‚æƒ³è¦é¿å…æ­¤é—®é¢˜ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹æ­¥éª¤ã€‚
  æœ¬æ–‡ä»‹ç»å…¶ç”¨æ³•ã€æœ€ä½³
---
import Details from "@theme/Details";

# useColorMode

å“åº”å¼é¢œè‰²æ¨¡å¼ï¼ˆä¸»é¢˜ï¼‰ç®¡ç†ï¼Œå…·æœ‰è‡ªåŠ¨æ•°æ®æŒä¹…åŒ–å’Œçµæ´»é…ç½®åŠŸèƒ½ã€‚

## Tips

<Details summary="ç‚¹å‡»å±•å¼€">
å¯¹äºæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œç”±äºæ— æ³•åœ¨æœåŠ¡ç«¯è·å–åˆ°ç”¨æˆ·çš„é¢œè‰²åå¥½ã€‚æ‰€ä»¥ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°é—ªçƒã€‚æƒ³è¦é¿å…æ­¤é—®é¢˜ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹æ­¥éª¤ã€‚

1. åœ¨ä½ çš„å†…å®¹æ¸²æŸ“å‰å¢åŠ ä¸€ä¸ªè„šæœ¬ã€‚

```tsx
<script
  dangerouslySetInnerHTML={{
    // å¢åŠ ä¸€ä¸ªè‡ªæ‰§è¡Œçš„å‡½æ•°
    __html: `
          (function () {
            function setMode(mode) {
              if (mode) {
                document.documentElement.classList.add(mode);
              }
            }
            let store;
            try {
              store = JSON.parse(localStorage.getItem('reactuses-color-mode'));
            } catch (err) { }
            let mode;
            if(store === null){
              // ä½ å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰è¿™ä¸ªé€»è¾‘
              const darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
              mode = darkQuery.matches ? 'dark' : 'light';
            }else {
              mode = store;
            }
            setMode(mode)
          })();
      `,
  }}
></script>
```

2. ä¸ºäº†æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†é¢œè‰²æ¨¡å¼ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ `context` æ¥å­˜å‚¨å®ƒä»¬ã€‚

```tsx
import { useColorMode } from "@reactuses/core";
import React, { createContext, useContext } from "react";

type ThemeContext = { 
  theme: string | null; 
  setTheme: (theme: string) => void;
  cycleTheme: () => void;
};

const ThemeContext = createContext<ThemeContext | undefined>(undefined);

export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme, cycleTheme] = useColorMode({
    modes: ['light', 'dark', 'auto'],
    defaultValue: 'auto',
    storageKey: 'my-app-theme',
  });

  return (
    <ThemeContext.Provider value={{ theme, setTheme, cycleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme() {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error("useTheme must be used within a ThemeProvider");
  }
  return context;
}
```

</Details>

## Usage

### åŸºæœ¬ç”¨æ³•

```tsx live
function Demo() {
  const [colorMode, setColorMode, cycle] = useColorMode({
    modes: ['light', 'dark'],
    defaultValue: 'light',
  });

  return (
    <div>
      <div>å½“å‰æ¨¡å¼: {colorMode}</div>
      <br />
      <div>
        <button onClick={() => setColorMode('light')}>æµ…è‰²</button>
        <button onClick={() => setColorMode('dark')}>æ·±è‰²</button>
        <button onClick={cycle}>å¾ªç¯åˆ‡æ¢</button>
      </div>
    </div>
  );
};
```

### å¤šå½©ä¸»é¢˜æ¨¡å¼

```tsx live
function Demo() {
  const [colorMode, setColorMode, cycle] = useColorMode({
    modes: ['light', 'dark', 'blue', 'green', 'purple', 'sepia'],
    defaultValue: 'light',
    modeClassNames: {
      light: 'theme-light',
      dark: 'theme-dark', 
      blue: 'theme-blue',
      green: 'theme-green',
      purple: 'theme-purple',
      sepia: 'theme-sepia'
    }
  });

  const themeColors = {
    light: '#f8f9fa',
    dark: '#343a40',
    blue: '#0d6efd',
    green: '#198754',
    purple: '#6f42c1',
    sepia: '#8b4513'
  };

  const themeLabels = {
    light: 'æµ…è‰²',
    dark: 'æ·±è‰²',
    blue: 'è“è‰²',
    green: 'ç»¿è‰²',
    purple: 'ç´«è‰²',
    sepia: 'æŠ¤çœ¼'
  };

  return (
    <div style={{ 
      padding: '20px', 
      backgroundColor: themeColors[colorMode] || '#f8f9fa',
      color: ['dark', 'blue', 'green', 'purple', 'sepia'].includes(colorMode) ? 'white' : 'black',
      borderRadius: '8px',
      transition: 'all 0.3s ease'
    }}>
      <div>å½“å‰ä¸»é¢˜: <strong>{themeLabels[colorMode]}</strong></div>
      <br />
      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
        {Object.entries(themeLabels).map(([key, label]) => (
          <button 
            key={key}
            onClick={() => setColorMode(key)}
            style={{ 
              padding: '8px 16px',
              border: colorMode === key ? '2px solid #007bff' : '1px solid #ccc',
              borderRadius: '4px',
              backgroundColor: colorMode === key ? '#007bff' : 'white',
              color: colorMode === key ? 'white' : 'black',
              cursor: 'pointer'
            }}
          >
            {label}
          </button>
        ))}
      </div>
      <br />
      <button 
        onClick={cycle}
        style={{
          padding: '10px 20px',
          backgroundColor: '#28a745',
          color: 'white',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer'
        }}
      >
        ğŸ”„ å¾ªç¯åˆ‡æ¢ä¸»é¢˜
      </button>
    </div>
  );
};
```

### ä½¿ç”¨æ•°æ®å±æ€§

```tsx live
function Demo() {
  const [colorMode, setColorMode, cycle] = useColorMode({
    modes: ['light', 'dark'],
    defaultValue: 'light',
    attribute: 'data-theme',
    selector: 'body'
  });

  return (
    <div>
      <div>å½“å‰æ¨¡å¼: {colorMode}</div>
      <div>æŸ¥çœ‹ body å…ƒç´ çš„ data-theme å±æ€§ï¼</div>
      <br />
      <div>
        <button onClick={() => setColorMode('light')}>æµ…è‰²</button>
        <button onClick={() => setColorMode('dark')}>æ·±è‰²</button>
        <button onClick={cycle}>å¾ªç¯åˆ‡æ¢</button>
      </div>
    </div>
  );
};
```

%%API%%
