---
title: useDeepCompareEffect 用法與示例
sidebar_label: useDeepCompareEffect
description: 修改後的 useEffect ，對其依賴項使用深度比較而不是引用相等。 本文介紹其用法、最佳實踐與代碼示例。適用於 React 開發中需要處理副作用的場景。
---
# useDeepCompareEffect

修改後的 useEffect ，對其依賴項使用深度比較而不是引用相等

## Usage

```tsx live

function Demo() {
  const [count, setCount] = useState(0);
  const effectCountRef = useRef(0);
  const deepCompareCountRef = useRef(0);

  useEffect(() => {
    effectCountRef.current += 1;
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [{}]);

  useDeepCompareEffect(() => {
    deepCompareCountRef.current += 1;
    return () => {
      // do something
    };
  }, [{}]);

  return (
    <div>
      <p>effect計數：{effectCountRef.current}</p>
      <p>深度比較計數：{deepCompareCountRef.current}</p>
      <p>
        <button type="button" onClick={() => setCount(c => c + 1)}>
          重新渲染
        </button>
      </p>
    </div>
  );
};

```

%%API%%